```{r}
# BMIN503 Final Project
# Author: David Hammill
# Date: 21 Nov 2021
# Description: 
```



### Overview
  - This project is hypothesizing that hemoconcentration on cardiopulminary bypass with del Nido cardioplegia used as an arresting agent leads to increased Acute Kidney Injury postoperatively. 
  - The data we are using is threefold
    - Data from the Society of Thorastic Surgeouns conisiting of open heart bypass cases
    - Data from PennChart EMR
    - Data from Quantum (bypass data)
  - Factulty 
    - Nemesh Desai, M.D.
    - Dr. Assad, 
    - PLACEHOLDER
  - [Link](https://github.com/DavidMHammill/BMIN503_Final_Project) to repository
 
### Introduction
  - Cardiac surgery patients experience AKI at a rate higher than any other group of patients which impacts length of stay and outcomes dramatically.  This study seeks to expose underlying risks associated with adding hemooconentration to the del Nido cardioplegia as opposed to using an alternative cardioplegia that may not require hemoconcentration.
  - Why does del Nido require hemoconcentration?
  
### Methods
  - The data will be cleaned, removing any Personal Patient Data
  - This study will categorize the cases assigning two levels, cases which use del Nido cardioplegia along with hemoconcentration.
  - This study will adjust for patients with pre-existing conditions that will place them at greater risk for AKI
  - Perform bivariate analysis on the two groups, the outcome being whether or not the patient experienced AKI
  - Data
    - STS Data:
    
```{r}
# Read the data into dataframe
sts = read.csv("data/sts_clean.csv")

# Summarize the dataframe
str(sts)
```
    - Dataset 2
    - Dataset 3
  
```{r}
# I am waiting on 2 additional datasets, in the meantime I will test the correlation of bypass time with AKI
# Compare creatinine levels with bypass time (bivariate analysis) 

library(tidyr)

# Create a function to normalize a vector based on min / max values
min_max_norm <- function(x) {
    (x - min(x)) / (max(x) - min(x))
}

df = sts[,c("Postoperative.Creatinine.Level", "Cardiopulmonary.Bypass.Time")]
df = drop_na(df)
df_norm = as.data.frame(lapply(df, min_max_norm))
results = cor.test(df_norm$Cardiopulmonary.Bypass.Time, df_norm$Postoperative.Creatinine.Level)

```
  
  
### Results
  - p-value of 2.514e-12  => Strong indicator that bypass time is strongly correlated with postoperative creatinine level.
  - Bullet 2
  
### References
  - Bullet 1
  - Bullet 2

